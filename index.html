<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADATA TV - VLC Private</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
        body { background: #050505; color: white; font-family: 'Cairo', sans-serif; }
        .card { background: #111; border-radius: 12px; padding: 12px; margin: 8px; display: flex; align-items: center; gap: 12px; border: 1px solid #222; cursor: pointer; }
        .vlc-icon { color: #ff9500; font-size: 20px; margin-right: auto; }
    </style>
</head>
<body>

    <div class="p-4">
        <div class="text-center mb-6">
            <img src="https://upload.wikimedia.org/wikipedia/ar/thumb/6/66/ADATA_logo.svg/960px-ADATA_logo.svg.png" style="height:35px; margin: auto;">
            <p class="text-[10px] mt-2 opacity-50 text-orange-500 font-bold">نمط التشفير المتقدم لـ VLC</p>
        </div>

        <div id="list"></div>
    </div>

    <script>
        const API = 'https://docs.google.com/spreadsheets/d/14Z-3UCmBxB9fkk0N29JiLYB7XeBPBvKHy8Ai_oL3dOM/gviz/tq?tqx=out:csv';

        async function init() {
            const res = await fetch(API);
            const text = await res.text();
            const data = text.split('\n').slice(1).map(row => {
                const p = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                return { name: p[0]?.replace(/"/g, ''), url: p[1]?.replace(/"/g, ''), logo: p[2]?.replace(/"/g, '') };
            }).filter(i => i.url);

            document.getElementById('list').innerHTML = data.map(i => `
                <div class="card" onclick="playPrivate('${i.url}', '${i.name}')">
                    <img src="${i.logo}" class="w-10 h-10 object-contain rounded" onerror="this.src='https://via.placeholder.com/40'">
                    <div class="font-bold text-sm">${i.name}</div>
                    <i class="fas fa-shield-alt vlc-icon"></i>
                </div>
            `).join('');
        }

        function playPrivate(url, title) {
            // تنظيف الرابط وتجهيز الـ Intent المخصص للحماية
            const cleanUrl = url.trim().replace(/^https?:\/\//, "");
            const secureIntent = `intent://${cleanUrl}#Intent;scheme=http;package=org.videolan.vlc;type=video/*;S.title=${encodeURIComponent(title)};B.no_history=true;end`;
            
            window.location.href = secureIntent;
        }

        init();
    </script>
</body>
</html>
