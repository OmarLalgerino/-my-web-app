<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ADATA TV</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white text-center">
    <div id="content" class="pt-20">
        <img src="https://upload.wikimedia.org/wikipedia/ar/thumb/6/66/ADATA_logo.svg/960px-ADATA_logo.svg.png" class="w-20 mx-auto mb-5">
        <button onclick="login()" class="bg-blue-600 px-10 py-3 rounded-lg font-bold">دخول إلى القنوات</button>
    </div>
    <div id="list" class="hidden p-5"></div>

    <script>
        function login() {
            if (navigator.userAgent.indexOf("median") >= 0) {
                median.socialLogin.google.login({
                    'redirectUri': 'https://omarlalgerino.github.io/-my-web-app/',
                    'callback': function(r) {
                        if (r.success || r.accessToken) {
                            document.getElementById('content').classList.add('hidden');
                            document.getElementById('list').classList.remove('hidden');
                            loadData();
                        }
                    }
                });
            } else { alert("افتح التطبيق من هاتفك"); }
        }
        async function loadData() {
            const res = await fetch('https://docs.google.com/spreadsheets/d/14Z-3UCmBxB9fkk0N29JiLYB7XeBPBvKHy8Ai_oL3dOM/gviz/tq?tqx=out:csv');
            const data = await res.text();
            document.getElementById('list').innerHTML = data.split('\n').slice(1).map(r => `<div class="bg-zinc-900 p-4 m-2 rounded border border-zinc-800">${r.split(',')[0].replace(/"/g, '')}</div>`).join('');
        }
    </script>
</body>
</html>
