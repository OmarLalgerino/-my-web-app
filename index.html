<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ADATA TV Pro - Final</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap');
        
        body {
            background-color: #050505;
            color: #ffffff;
            font-family: 'Cairo', sans-serif;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        /* حاوية البحث والقوائم */
        .header-box { background: #050505; z-index: 100; position: sticky; top: 0; }

        .tab-item { 
            padding: 10px 18px; 
            cursor: pointer; 
            color: #888; 
            white-space: nowrap;
            font-weight: bold;
            border-bottom: 2px solid transparent;
            transition: 0.3s;
        }
        .tab-item.active { color: #ff9500; border-bottom-color: #ff9500; }

        .channel-card {
            background: #111;
            border: 1px solid rgba(255,255,255,0.05);
            border-radius: 12px;
            padding: 12px;
            margin: 6px 12px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        /* زر التلجرام - ثابت في أسفل الشاشة */
        .telegram-fixed {
            position: fixed;
            bottom: 20px;
            left: 20px;
            right: 20px;
            background: #0088cc;
            color: white !important;
            padding: 14px;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            font-weight: bold;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
            z-index: 999;
            text-decoration: none;
        }
        
        /* ترك مسافة في أسفل القائمة حتى لا يغطي الزر على آخر قناة */
        #list { padding-bottom: 90px; }
        
        .loader { border-top-color: #ff9500; animation: spinner 0.6s linear infinite; }
        @keyframes spinner { to { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <div class="header-box">
        <div class="p-4 flex justify-between items-center">
            <img src="https://upload.wikimedia.org/wikipedia/ar/thumb/6/66/ADATA_logo.svg/960px-ADATA_logo.svg.png" class="h-8">
            <span class="text-xs bg-orange-500/10 text-orange-500 px-2 py-1 rounded">V 2.0</span>
        </div>

        <div class="px-4 mb-2">
            <div class="bg-[#1a1a1a] rounded-xl flex items-center px-4 py-2 gap-3">
                <i class="fas fa-search text-gray-500"></i>
                <input type="text" id="search-input" placeholder="بحث أبجدي سريع..." class="bg-transparent border-none outline-none w-full text-sm">
            </div>
        </div>

        <div class="flex overflow-x-auto border-b border-white/5 no-scrollbar" id="tabs">
            <div class="tab-item active" onclick="UI.switch('all', this)">الكل</div>
            <div class="tab-item" onclick="UI.switch('sports', this)">رياضة</div>
            <div class="tab-item" onclick="UI.switch('movies', this)">أفلام</div>
            <div class="tab-item" onclick="UI.switch('series', this)">مسلسلات</div>
            <div class="tab-item" onclick="UI.switch('news', this)">أخبار</div>
            <div class="tab-item" onclick="UI.switch('docs', this)">وثائقي</div>
            <div class="tab-item" onclick="UI.switch('media', this)">ميديا</div>
        </div>
    </div>

    <div id="list" class="flex-1 overflow-y-auto"></div>

    <a href="https://t.me/zone1996" target="_blank" class="telegram-fixed">
        <i class="fab fa-telegram-plane text-xl"></i>
        <span>اضغط هنا لمتابعة جديدنا على التلجرام</span>
    </a>

    <script>
        const SHEETS = {
            sports: '14Z-3UCmBxB9fkk0N29JiLYB7XeBPBvKHy8Ai_oL3dOM',
            movies: '1tSIcjUZuRphgmcS0YNUvT83980OWLH7KoNpmUQ8UfWA',
            series: '1UmwKt7FLLHY5KbpkxRw50n0HY8vbAnkmUZCLceGU2-s',
            news: '1LNdY3vajY5vMM7zGl4ipEcz-96gPs7QI-QgaS4LwP94',
            docs: '1tugkYcVuDf0bIo6bAOZzo5JJoA0YnE8OUxXK_50gbmQ',
            media: '1OMXrU6bIGvfhqlrT70sSFzhNx7aZdyMuGWf4bhA6-1Q'
        };

        const UI = {
            currentData: [],
            
            async fetch(key) {
                const url = `https://docs.google.com/spreadsheets/d/${SHEETS[key]}/gviz/tq?tqx=out:csv`;
                try {
                    const r = await fetch(url);
                    const t = await r.text();
                    return t.split('\n').slice(1).map(row => {
                        const c = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                        return {
                            n: c[0]?.replace(/"/g, '').trim(),
                            u: c[1]?.replace(/"/g, '').trim(),
                            l: c[2]?.replace(/"/g, '').trim() || "https://via.placeholder.com/50"
                        }
                    }).filter(i => i.n && i.u);
                } catch { return []; }
            },

            async load(type) {
                const list = document.getElementById('list');
                list.innerHTML = '<div class="flex justify-center p-20"><div class="loader ease-linear rounded-full border-4 border-t-4 border-gray-200 h-10 w-10"></div></div>';
                
                let results = [];
                if(type === 'all') {
                    for(let k in SHEETS) { results = [...results, ...await this.fetch(k)]; }
                } else {
                    results = await this.fetch(type);
                }

                // الترتيب الأبجدي الدقيق
                this.currentData = results.sort((a,b) => a.n.localeCompare(b.n, 'ar'));
                this.render(this.currentData);
            },

            render(data) {
                document.getElementById('list').innerHTML = data.map(i => `
                    <div class="channel-card" onclick="window.location.href='intent://${i.u.replace(/^https?:\/\//, "")}#Intent;scheme=http;package=org.videolan.vlc;type=video/*;S.title=${encodeURIComponent(i.n)};end'">
                        <img src="${i.l}" class="w-10 h-10 object-contain rounded" onerror="this.src='https://via.placeholder.com/50'">
                        <div class="flex-1 font-bold text-sm">${i.n}</div>
                        <i class="fas fa-play-circle text-orange-500 opacity-50"></i>
                    </div>
                `).join('');
            },

            switch(type, el) {
                document.querySelectorAll('.tab-item').forEach(x => x.classList.remove('active'));
                el.classList.add('active');
                this.load(type);
            }
        };

        document.getElementById('search-input').oninput = (e) => {
            const val = e.target.value.toLowerCase();
            UI.render(UI.currentData.filter(i => i.n.toLowerCase().includes(val)));
        };

        window.onload = () => UI.load('all');
    </script>
</body>
</html>
