<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>NETGo TV</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&family=Orbitron:wght@700;900&display=swap');
        * { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); box-sizing: border-box; }
        :root { --surface: #0a0a0c; --card-bg: rgba(255, 255, 255, 0.05); --text-main: #ffffff; --primary: #22c55e; }
        body.light-mode { --surface: #f8fafc; --card-bg: rgba(0, 0, 0, 0.05); --text-main: #0f172a; }
        body { background-color: var(--surface); color: var(--text-main); font-family: 'Cairo', sans-serif; margin: 0; overflow: hidden; height: 100vh; }
        .bg-blobs { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; filter: blur(80px); opacity: 0.2; }
        .blob { position: absolute; border-radius: 50%; background: var(--primary); width: 300px; height: 300px; }
        .channels-list.arch { display: flex; align-items: center; overflow-x: auto; padding: 40px 42vw; gap: 15px; perspective: 1200px; height: 280px; scrollbar-width: none; }
        .channels-list.grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; padding: 20px; overflow-y: auto; height: calc(100vh - 250px); }
        .net-card { background: var(--card-bg); border-radius: 15px; border: 1px solid rgba(128,128,128,0.1); overflow: hidden; position: relative; }
        .arch .net-card { min-width: 105px; height: 150px; flex-shrink: 0; }
        .grid .net-card { width: 100%; height: 130px; }
        .net-card img { width: 100%; height: 100%; object-fit: contain; }
        .tabs { display: flex; overflow-x: auto; gap: 8px; padding: 10px; scrollbar-width: none; }
        .tab-item { cursor: pointer; padding: 6px 16px; border-radius: 20px; background: var(--card-bg); font-size: 12px; white-space: nowrap; }
        .tab-item.active { background: var(--primary); color: #fff; }
        #splash-screen { position: fixed; inset: 0; background: #0a0a0a; z-index: 9999; display: flex; align-items: center; justify-content: center; }
    </style>
</head>
<body>
    <div class="bg-blobs"><div class="blob" style="top:-100px; right:-50px;"></div></div>
    <div id="splash-screen"><div class="text-4xl font-black italic text-white" style="font-family:'Orbitron'"><span class="text-green-500">NET</span>Go</div></div>

    <header class="p-5 flex justify-between items-center">
        <div class="text-2xl font-black italic" style="font-family:'Orbitron'">NET<span class="text-green-500">Go</span></div>
        <div class="flex gap-2">
            <div onclick="UIManager.toggleLayout()" class="w-10 h-10 bg-white/10 rounded-full flex items-center justify-center cursor-pointer"><i id="layout-icon" class="fas fa-th-large"></i></div>
            <div id="theme-btn" class="w-10 h-10 bg-white/10 rounded-full flex items-center justify-center cursor-pointer"><i id="theme-icon" class="fas fa-moon text-yellow-400"></i></div>
        </div>
    </header>

    <div class="px-5"><input type="text" oninput="UIManager.search(this.value)" placeholder="ابحث هنا..." class="w-full p-3 rounded-2xl bg-white/5 border border-white/10 outline-none text-sm"></div>

    <div class="tabs">
        <div class="tab-item active" onclick="UIManager.switchTab('all', this)">الكل</div>
        <div class="tab-item" onclick="UIManager.switchTab('sports', this)">رياضة</div>
        <div class="tab-item" onclick="UIManager.switchTab('news', this)">أخبار</div>
        <div class="tab-item" onclick="UIManager.switchTab('docs', this)">وثائقية</div>
        <div class="tab-item" onclick="UIManager.switchTab('movies', this)">أفلام</div>
        <div class="tab-item" onclick="UIManager.switchTab('series', this)">مسلسلات</div>
    </div>

    <div class="flex-1 overflow-hidden">
        <div id="list" class="channels-list arch"></div>
        <div id="active-name" class="text-center mt-4 font-bold text-green-500"></div>
    </div>

    <script>
        const API_LINKS = {
            sports: 'https://docs.google.com/spreadsheets/d/14Z-3UCmBxB9fkk0N29JiLYB7XeBPBvKHy8Ai_oL3dOM/gviz/tq?tqx=out:csv',
            news: 'https://docs.google.com/spreadsheets/d/1LNdY3vajY5vMM7zGl4ipEcz-96gPs7QI-QgaS4LwP94/gviz/tq?tqx=out:csv',
            docs: 'https://docs.google.com/spreadsheets/d/1tugkYcVuDf0bIo6bAOZzo5JJoA0YnE8OUxXK_50gbmQ/gviz/tq?tqx=out:csv',
            movies: 'https://docs.google.com/spreadsheets/d/1tSIcjUZuRphgmcS0YNUvT83980OWLH7KoNpmUQ8UfWA/gviz/tq?tqx=out:csv',
            series: 'https://docs.google.com/spreadsheets/d/1UmwKt7FLLHY5KbpkxRw50n0HY8vbAnkmUZCLceGU2-s/gviz/tq?tqx=out:csv'
        };

        const UIManager = {
            allData: [], isGrid: false,
            async init() {
                document.getElementById('theme-btn').onclick = () => {
                    document.body.classList.toggle('light-mode');
                    document.getElementById('theme-icon').className = document.body.classList.contains('light-mode') ? 'fas fa-sun text-orange-500' : 'fas fa-moon text-yellow-400';
                };
                await this.loadCategory('all');
                setTimeout(() => document.getElementById('splash-screen').style.display='none', 2000);
            },
            async loadCategory(t) {
                let d = [];
                if(t === 'all') for(let k in API_LINKS) d = [...d, ...await this.fetch(k)];
                else d = await this.fetch(t);
                this.allData = d; this.render(d);
            },
            async fetch(t) {
                try {
                    const r = await fetch(API_LINKS[t]); const txt = await r.text();
                    return txt.split('\n').slice(1).map(row => {
                        const p = row.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/);
                        return { name: p[0]?.replace(/"/g,''), url: p[1]?.replace(/"/g,''), logo: p[2]?.replace(/"/g,'') };
                    }).filter(i => i.url);
                } catch { return []; }
            },
            render(data) {
                const list = document.getElementById('list');
                list.innerHTML = data.map(i => {
                    const intent = `intent://${i.url.replace(/^https?:\/\//,'')}#Intent;scheme=http;package=com.brouken.player;type=video/*;S.title=${encodeURIComponent(i.name)};S.http-user-agent=Mozilla/5.0;end`;
                    return `<div class="net-card" onclick="window.location.href='${intent}'"><img src="${i.logo}" data-name="${i.name}"><div class="absolute bottom-0 w-full bg-black/60 text-[10px] text-center text-white">${i.name}</div></div>`;
                }).join('');
                if(!this.isGrid) this.setupArch();
            },
            toggleLayout() {
                this.isGrid = !this.isGrid;
                const list = document.getElementById('list');
                list.className = this.isGrid ? "channels-list grid" : "channels-list arch";
                document.getElementById('layout-icon').className = this.isGrid ? "fas fa-list" : "fas fa-th-large";
                if(!this.isGrid) this.setupArch();
            },
            setupArch() {
                const slider = document.getElementById('list');
                slider.onscroll = () => {
                    if(this.isGrid) return;
                    const cards = document.querySelectorAll('.net-card');
                    const center = slider.scrollLeft + (slider.offsetWidth/2);
                    cards.forEach(c => {
                        const cardCenter = c.offsetLeft + (c.offsetWidth/2);
                        const dist = Math.abs(center - cardCenter);
                        c.style.transform = `scale(${Math.max(0.7, 1.3 - (dist/350))})`;
                        if(dist < 50) document.getElementById('active-name').innerText = c.querySelector('img').dataset.name;
                    });
                };
            },
            switchTab(t, el) {
                document.querySelectorAll('.tab-item').forEach(i => i.classList.remove('active'));
                el.classList.add('active'); this.loadCategory(t);
            },
            search(q) { this.render(this.allData.filter(i => i.name.toLowerCase().includes(q.toLowerCase()))); }
        };
        UIManager.init();
    </script>
</body>
</html>
